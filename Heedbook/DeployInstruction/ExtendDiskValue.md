#Расширение дискового пространства на Виртуальной машине:

- Заходим в настройки виртуальной машины у которой хотим расширить дисковое пространство.
- Заходим в настройки дисков виртуальной машины в левом меню:
```	
	Settings -> Disks
```
- Нажимаем на кнопку: + Add data disk
- В столбце Name таблицы с дисками открываем раскрывающийся список в котором выбираем: Create disk.
- В открывшемся окне Create managed disk пишем название нового диска, тип диска и размер. Нажимаем кнопку Create.

- Используя терминал заходим на расширяемую виртуальную машину через ssh.
- выполнив следующую команду получим список дисков подключенных к виртуальной машине:
```
	sudo fdisk -l
```
- из списка дисков найдем вновь добавленный(диск будет не "Партиционирован"). Скопируем путь к физическому диску (например: /dev/sdc).
 
- выполним следующую команду создадим раздел
```
	sudo fdisk /dev/sdc
```
- Консоль постребует ввода команды, введите: n
```
	Command (m for help): n
```
- Консоль потребует тип партиционирования, введите: p
```
	Select (default p): раздела
```
- Консоль попросит ввести номер раздела, введите число от 1 до 4: 1
```	
	Partition number (1-4, default 1): 1
```
- После того как в консоли будет написано, что создан раздел, введите: w
```
	Command (m for help): w
```
- Выполним форматирование добавленного раздела диска, для этого выполним команду:
```
	sudo mkfs.ext4 /dev/sdc1
```
- После форматирования раздела необходимо подключить раздел, для этого нам нужно добавить раздел в список добавленных разделов, для этого выполним следующую команду:
```	
	sudo vim /etc/fstab
```
откроется конфигурация, добавим еще одну строку и заполним ее:
```
	# CLOUD_IMG: This file was created/modified by the Cloud Image build process
	UUID=3756934c-31d3-413c-8df9-5b7c7b1a4451       /        ext4   defaults,discard        0 0
	UUID=B38E-A2BF  /boot/efi       vfat    defaults,discard        0 0
	/dev/disk/cloud/azure_resource-part1    /mnt    auto    defaults,nofail,x-systemd.requires=cloud-init.service,comment=cloudconfig       0       2
	/dev/sdc1	/home/nkrokhmal/storage 	auto 	default		0	0
```
Так как мы расширяли папку storage, то указали именно его во втором столбце.

- Для сохранения данных в из папки storage, переименуем его в storage1 выполнив команду:
```
	sudo mv storage/ storage1/
```
- Вновь создадим папку storage:
```	
	sudo mkdir storage
```
- перезапустим Виртуальную машину:
```
	sudo reboot
```
- После перезапуска проверим содержимое папки storage в ней должна появиться папка lost+found.
- В вновь созданную папку storage скопируем сохраненные файлы из папки storage1, выполнив следующую команду:
```
	sudo cp storage1/* storage -R
```
- после выполнения команды нужно проверить папку storage на наличие файлов.
- После копирования всех файлов папку storage1 можно удалить.

	

